(function(a){'use strict';a.fn.imagesLoaded=function(b){function c(){var c=a(j),d=a(k);f&&(k.length?f.reject(h,c,d):f.resolve(h)),a.isFunction(b)&&b.call(e,h,c,d)}function d(b,d){"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw=="===b.src||-1!==a.inArray(b,i)||(i.push(b),d?k.push(b):j.push(b),a.data(b,"imagesLoaded",{isBroken:d,src:b.src}),g&&f.notifyWith(a(b),[d,h,a(j),a(k)]),h.length===i.length&&(setTimeout(c),h.unbind(".imagesLoaded")))}var e=this,f=a.isFunction(a.Deferred)?a.Deferred():0,g=a.isFunction(f.notify),h=e.find("img").add(e.filter("img")),i=[],j=[],k=[];return h.length?h.bind("load.imagesLoaded error.imagesLoaded",function(a){d(a.target,"error"===a.type)}).each(function(b,c){var e=c.src,f=a.data(c,"imagesLoaded");return f&&f.src===e?void d(c,f.isBroken):c.complete&&void 0!==c.naturalWidth?void d(c,0===c.naturalWidth||0===c.naturalHeight):void((c.readyState||c.complete)&&(c.src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==",c.src=e))}):c(),f?f.promise(e):e}})(jQuery);
