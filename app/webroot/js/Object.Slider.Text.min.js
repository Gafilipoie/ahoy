function TextSlider(){this.slider=$("#text-slider"),this.tContainer=$("#text-container"),this.tElements=$("#text-slider > li"),this.currentTIndex=-1,this.total_TSlides=0,this.t=null,this.t2=null,this.isOpen=0,this.slideTime=300,this.openTime=2e3,this.closeTime=2e3,this.swipeTime=1e3,this.swipeEasing="easeOutExpo",this.openEasing="easeOutExpo",this.closeEasing="easeOutExpo",this.slideEasing="easeOutExpo",this.hoverSpeed=1,this.animating=!1,this.eventsOn=!1,this.jsonCache=[]}TextSlider.prototype.getSliderHeight=function(){return parseInt($("#text-slider").height()+64)},TextSlider.prototype.getSliderWidth=function(){return parseInt($("#text-slider").outerWidth(!0))},TextSlider.prototype.getNavBarWidth=function(){return parseInt($("#text-lhover").first().width())},TextSlider.prototype.getTopDistance=function(){return parseInt((deviceHeight-this.getSliderHeight())/2)},TextSlider.prototype.getPaginationHeight=function(){return parseInt($(".text-pagination").first().outerHeight(!0))},TextSlider.prototype.getResizeRatio=function(){return this.getSliderWidth()/699},TextSlider.prototype.getSliderPadding=function(){return parseInt(tSlider.slider.css("padding-top"))},TextSlider.prototype.initPagination=function(){$(".text-pagination").children().remove();for(var a=0;a<this.json_data.Tab.length;a++)$("#text-lhover .text-pagination").append($("<li>")),$("#text-rhover .text-pagination").append($("<li>"));$("#text-lhover .text-pagination li").first().addClass("active"),$("#text-rhover .text-pagination li").first().addClass("active")},TextSlider.prototype.showPagination=function(){$(".text-pagination").show(),$(".text-prev span").show(),$(".text-next span").show()},TextSlider.prototype.hidePagination=function(){$(".text-pagination").hide(),$(".text-prev span").hide(),$(".text-next span").hide()},TextSlider.prototype.alignPagination=function(){var a=this;$(".text-prev span").show().css({top:vSlider.getTopDistance()}),$(".text-next span").show().css({bottom:vSlider.getTopDistance()}),$(".text-pagination").show().css({top:(deviceHeight-a.getPaginationHeight())/2})},TextSlider.prototype.init=function(a){var b=this,c=a||null;c&&(b.slideTime=parseInt(c.t_slide_time,10),b.openTime=parseInt(c.t_open_time,10),b.closeTime=parseInt(c.t_close_time,10),b.swipeTime=parseInt(c.t_swipe_time,10),b.swipeEasing=c.t_swipe_easing,b.openEasing=c.t_open_easing,b.closeEasing=c.t_close_easing,b.slideEasing=c.t_slide_easing,b.hoverSpeed=parseInt(c.t_hover_speed,10)),b.tElements=b.slider.children("li"),b.total_TSlides=b.tElements.length,b.initEvents()},TextSlider.prototype.alignSlider=function(){this.slider.stop().animate({top:(deviceHeight-this.getSliderHeight())/2},500)},TextSlider.prototype.open=function(){var a=this;a.isOpen=1,hSlider.close();a.getSliderHeight();a.tContainer.addClass("active"),a.tContainer.show(),loader.hide(),$("#text-next,#text-prev").fadeIn(a.openTime),"mobile"==clientDevice&&$(a.tElements).each(function(){$("[style*=x-large]",this).css("font-size","medium")}),a.alignPagination()},TextSlider.prototype.close=function(a){var b=this;b.tContainer.hide(),a&&a(),$("#text-next,#text-prev").hide()},TextSlider.prototype.getData=function(a){var b=this;try{data=JSON.parse(b.jsonCache[a]),b.setData(data)}catch(c){$.ajax({url:a,dataType:"json",cache:!0}).done(function(c){b.setData(c,a)})}},TextSlider.prototype.setData=function(a,b){var c=this;c.jsonCache[b]=JSON.stringify(a),c.json_data=a,c.clear(),showLoader();for(var d=0;d<a.Tab.length;d++){for(var e,f=a.Tab[d],g=$("<li>").append($("<h3>").append($("<span>").html(f.Tab.name_en))),h=$("<div>"),k=0;k<f.Content.length;k++){if(e=f.Content[k],"image"==e.type){console.log(e);var l=$("<img>").attr("src",getFullImagePath(e.image));e.image_alt&&l.attr("alt",e.image_alt),e.image_title&&l.attr("title",e.image_title),h.append(l)}"text"==e.type&&(h.append($("<div>").addClass("text").addClass("clearfix").append($("<div>").addClass("en").html(e.text_en)).append($("<div>").addClass("de").html(e.text_de))),$(".text > .de").css("color",options.primary_text_color))}g.append(h),c.slider.append(g)}c.init(json_settings),c.open(),c.initPagination(),c.resizeSlider(!0),c.slider.show().css({top:(deviceHeight-c.getSliderHeight())/2}),hideLoader(),c.showPagination()},TextSlider.prototype.clear=function(){var a=this;a.destroyEvents(),a.slider.html("")},TextSlider.prototype.initEvents=function(){function a(a,b,c){d.slider.addClass("clicked"),d.slider.removeClass("dragable"),d.startTouchX=b,d.startTouchY=c,d.lastTouchMoveX=d.startTouchX,d.lastTouchMoveY=d.startTouchY,d.isSliding&&a.preventDefault(),d.slider.stop(!0,!1).css({top:d.slider.css("top")}),d.difTouchX=d.startTouchX,d.difTouchY=d.startTouchY}function b(a,b,c){if(a.preventDefault(),d.slider.hasClass("clicked")){d.slider.addClass("dragable"),d.difTouchX=d.lastTouchMoveX,d.difTouchY=d.lastTouchMoveY,curX=b,curY=c;var e=curY-d.lastTouchMoveY,f=d.slider.height();if(f>deviceHeight+20){var g=parseInt(d.slider.css("top"),10);10>g+e&&0<e?d.slider.stop(!0,!1).css({top:g+e}):g>deviceHeight-f-20&&0>e&&d.slider.stop(!0,!1).css({top:g+e})}d.lastTouchMoveX=curX,d.lastTouchMoveY=curY}}function c(a){var b=(d.difTouchY-d.lastTouchMoveY)/30,c=(d.difTouchX-d.lastTouchMoveX)/50;if(1<=Math.abs(b)){b=-1>=b?Math.floor(b):Math.ceil(b);var e=b/Math.abs(b);1==Math.abs(b)?(d.moveUp(),0<e?d.moveUp():d.moveDown()):setTimeout(function(){for(i=0;i<Math.abs(b);i++)0<e?d.moveUp(Math.abs(b)):d.moveDown(Math.abs(b))},0)}else 0==d.startTouchX-d.lastTouchMoveX||0!=d.startTouchY-d.lastTouchMoveY||a.preventDefault()}var d=this;!0==d.eventsOn||(d.eventsOn=!0,d.slider.on("click","li > h3",function(){var a=$(this);d.showTSliderAtIndex(a.parent("li").index())}),d.tContainer.on("click",".text-next",function(){d.showTSliderAtIndex(d.currentTIndex+1)}),d.tContainer.on("click",".text-prev",function(){d.showTSliderAtIndex(d.currentTIndex-1)}),"desktop"==clientDevice&&(d.tContainer.on("mouseenter",".text-next",function(){var a=d.tElements.first().children("h3").outerHeight(!0);d.t2=setTimeout(function(){d.t=setInterval(function(){var b=parseInt(d.slider.css("top"),10);if(b-=d.hoverSpeed,0>b){var c=d.slider.height();c>deviceHeight&&c+b+a>deviceHeight&&d.slider.css({top:b})}},1)},200)}),d.tContainer.on("mouseenter",".text-prev",function(){d.tElements.first().children("h3").outerHeight(!0);d.t2=setTimeout(function(){d.t=setInterval(function(){var a=parseInt(d.slider.css("top"),10);a+=d.hoverSpeed,0>a&&d.slider.css({top:a})},1)},200)}),d.tContainer.on("mouseleave",".text-next,.text-prev",function(){clearInterval(d.t),clearTimeout(d.t2)})),d.slider.on("mousedown",function(b){a(b,b.clientX,b.clientY)}),d.slider.on("mousemove",function(a){b(a,a.clientX,a.clientY)}),d.slider.on("mouseup",function(a){c(a)}),d.slider.on("touchstart",function(b){1==b.originalEvent.touches.length&&a(b,b.originalEvent.targetTouches[0].pageX,b.originalEvent.targetTouches[0].pageY)}),d.slider.on("touchmove",function(a){1==a.originalEvent.touches.length&&b(a,a.originalEvent.targetTouches[0].pageX,a.originalEvent.targetTouches[0].pageY)}),d.slider.on("touchend",function(a){c(a)}),$(".text-pagination").on("click","li",function(){var a=this,b=$(a).index();$(".text-pagination li").removeClass("active"),$("#text-lhover .text-pagination li").eq(b).addClass("active"),$("#text-rhover .text-pagination li").eq(b).addClass("active"),d.showTSliderAtIndex(b)}),tSlider.tContainer.mousewheel(function(a,b,c,d){window.isMagicMouse||0==parseInt(d)-d||(window.isMagicMouse=!0),0>d&&tSlider.moveUp(d),0<d&&tSlider.moveDown(d),-1>=c&&(clearTimeout($.data(this,"timer")),$.data(this,"timer",setTimeout(function(){changeCategory(1)},200))),1<=c&&(clearTimeout($.data(this,"timer")),$.data(this,"timer",setTimeout(function(){changeCategory(-1)},200)))}),tSlider.tContainer.touchwipe({wipeRight:function(){changeCategory(-1)},wipeLeft:function(){changeCategory(1)},min_move_x:20,min_move_y:20,preventDefaultEvents:!0}))},TextSlider.prototype.destroyEvents=function(){var a=this;!1==a.eventsOn||(a.eventsOn=!1,clearInterval(a.t),clearTimeout(a.t2),a.slider.off("mousedown"),a.slider.off("mousemove"),a.slider.off("mouseup"),a.slider.off("touchstart"),a.slider.off("touchmove"),a.slider.off("touchend"),a.slider.off("click","li > h3"),a.tContainer.off("click",".text-next"),a.tContainer.off("click",".text-prev"),a.tContainer.off("mouseenter",".text-next"),a.tContainer.off("mouseenter",".text-prev"),a.tContainer.off("mouseleave",".text-next,.text-prev"),$(".text-pagination").off("click","li"))},TextSlider.prototype.showTSliderAtIndex=function(a){var b=this;0>a||a>=b.total_TSlides||(b.currentTIndex=a,clearInterval(b.t),b.tElements.eq(a).hasClass("active")?(b.tElements.removeClass("active"),b.tElements.children("h3").children("span").css({color:"#231F20","border-bottom":"none"}),b.animating=!0,b.tElements.eq(a).children("div").slideUp(b.slideTime,b.slideEasing,function(){var a=b.getSliderHeight(),c=b.getTopDistance();b.slider.animate({top:c},300),setTimeout(function(){b.animating=!1},500)})):(0<b.tElements.filter(".active").length&&(b.tElements.children("div").slideUp(b.slideTime,b.slideEasing),b.tElements.removeClass("active"),b.tElements.children("h3").children("span").css({color:"#231F20","border-bottom":"none"})),b.tElements.eq(a).addClass("active"),b.tElements.eq(a).children("h3").children("span").css({color:options.primary_text_color,"border-bottom":"2px solid "+options.primary_text_color}),b.animating=!0,b.tElements.eq(a).children("div").slideDown(b.slideTime,b.slideEasing),b.slider.animate({top:0},300),setTimeout(function(){b.animating=!1},500))),$(".text-pagination li").removeClass("active"),$("#text-rhover .text-pagination li").eq(b.currentTIndex).addClass("active"),$("#text-lhover .text-pagination li").eq(b.currentTIndex).addClass("active")},TextSlider.prototype.moveUp=function(a){var b=this,c=b.slider.height(),d=parseInt(b.slider.css("top"),10),e=300;if(window.isMagicMouse?(d-=50*Math.abs(a),e=100):d-=300*Math.abs(a),d<deviceHeight-c-e){var f=Math.min(b.total_TSlides,b.currentTIndex+1);b.currentTIndex==f||b.animating||this.showTSliderAtIndex(f)}b.animating||c>deviceHeight+50&&(d<deviceHeight-c&&(d=deviceHeight-c-50),window.isMagicMouse?b.slider.css({top:d}):b.slider.stop(!0,!1).animate({top:d},b.swipeTime,b.swipeEasing))},TextSlider.prototype.moveDown=function(a){var b=this,c=b.slider.height(),d=parseInt(b.slider.css("top"),10);if(d+=window.isMagicMouse?50*Math.abs(a):300*Math.abs(a),70<d){var e=Math.max(0,b.currentTIndex-1);b.currentTIndex==e||b.animating||this.showTSliderAtIndex(e)}b.animating||c>deviceHeight&&(10<d&&(d=10),window.isMagicMouse?b.slider.css({top:d}):b.slider.stop(!0,!1).animate({top:d},b.swipeTime,b.swipeEasing))},TextSlider.prototype.resizeSlider=function(a){var b=this,c=Math.min(Math.floor(.49*deviceWidth),699),d=Math.floor(.67*c);765<deviceWidth&&($("#text-container").width(c),$("#text-slider").width(c)),b.showPagination(),b.alignPagination(),b.resizeText(),a||b.alignSlider()},TextSlider.prototype.resizeText=function(){var a=this.getResizeRatio();$("#text-slider li h3").css({"font-size":58*a+"px","line-height":58*a+"px"}),$("#text-slider li .en").css({"font-size":17*a+"px","line-height":24*a+"px"}),$("#text-slider li .de").css({"font-size":17*a+"px","line-height":24*a+"px"}),$("#text-slider li h3").hover(function(){$(this).css("color",options.primary_text_color)},function(){$(this).css("color","#231F20")})};
